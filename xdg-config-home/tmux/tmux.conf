set -g default-terminal "xterm-256color" # TERM="xterm-256color"
set -g base-index 1 # Start counting windows from 1
set -g history-limit 1000000 # History limit
set -g default-shell /bin/fish # fish by default
set -g focus-events on # Enable window/pane focus detection for apps

# TODO
# setw -g pane-base-index 1
# set -g escape-time 0
# set -sa terminal-features ',xterm-256color:RGB'
set -g mouse on

# M-e as prefix key
set -g prefix M-e

# Open new window (M-=)
bind-key -n M-'=' new-window

# Open new window in current directory (M-\)
bind-key -n M-'\' new-window -c "#{pane_current_path}"

# Close focused window (M-- )
bind-key -n M-'-' kill-window

# Navigate to next/previous window (M-] / M-[)
bind-key -n M-']' next-window
bind-key -n M-'[' previous-window

# Move window left/right (M-e M-[ / M-])
bind-key -r M-'[' swap-window -t -1\; select-window -t -1
bind-key -r M-']' swap-window -t +1\; select-window -t +1

# Select nth window (M-1..M-0)
bind-key -n M-1 select-window -t :1
bind-key -n M-2 select-window -t :2
bind-key -n M-3 select-window -t :3
bind-key -n M-4 select-window -t :4
bind-key -n M-5 select-window -t :5
bind-key -n M-6 select-window -t :6
bind-key -n M-7 select-window -t :7
bind-key -n M-8 select-window -t :8
bind-key -n M-9 select-window -t :9
bind-key -n M-0 select-window -t :10

# Open new pane on top/bottom/left/right (M-e k/j/h/l)
bind-key k split-window -vb -c "#{pane_current_path}"  # vertical split above
bind-key j split-window -v -c "#{pane_current_path}"   # vertical split below
bind-key h split-window -hb -c "#{pane_current_path}"  # horizontal split left
bind-key l split-window -h -c "#{pane_current_path}"   # horizontal split right

# Close focused pane (M-q)
bind-key -n M-q killp

# Select pane at top/bottom/left/right (M-k/M-j/M-h/M-l)
bind-key -n M-k select-pane -U
bind-key -n M-j select-pane -D
bind-key -n M-h select-pane -L
bind-key -n M-l select-pane -R

# Move pane to far top/bottom/left/right (M-e K/J/H/L)
bind-key K splitw -fvb \; swapp -t ! \; killp -t !   # move pane to far top
bind-key J splitw -fv  \; swapp -t ! \; killp -t !   # move pane to far bottom
bind-key H splitw -fhb \; swapp -t ! \; killp -t !   # move pane to far left
bind-key L splitw -fh  \; swapp -t ! \; killp -t !   # move pane to far right

# Resize pane by 5 cells (M-e M-k/M-j/M-h/M-l)
bind-key -r M-k resize-pane -U 5
bind-key -r M-j resize-pane -D 5
bind-key -r M-h resize-pane -L 5
bind-key -r M-l resize-pane -R 5

# Enter copy mode (M-e f)
bind f copy-mode
bind -T copy-mode-vi v send-keys -X begin-selection # Start selection (v)
bind -T copy-mode-vi y send-keys -X copy-selection\; send-keys -X cancel # End selection, copy and exit copy mode (y)
